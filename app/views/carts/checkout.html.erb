<div class="w-full grid md:grid-cols-2">
  <div class="w-full flex flex-col items-center md:pt-8">
    <h1 class="text-5xl font-broken text-indigo-900 text-center">Your Cart</h1>
    <p>You have <%= @current_cart.cart_items.sum(&:quantity) %> products in your cart</p>
    <div class="mx-auto flex flex-col gap-2"> 
      <% total_price = 0 %>
      <% @current_cart.cart_items.each.with_index do |cart_item, index| %>
        <div class="flex gap-2 bg-gray-700/75 p-2">
          <span class="px-2 rounded-full bg-gray-500 text-gray-100"><%= index + 1 %></span>
          <p class="text-indigo-100"><%= cart_item.product.name %></p>
          <p class="text-green-500"><%= number_to_currency cart_item.product.price %></p>
          
          <!-- Display the Quantity for each product -->
          <p class="text-indigo-100">Quantity: <%= cart_item.quantity %></p>
          
          <!-- Total price for this item (price * quantity) -->
          <p class="text-yellow-500">Subtotal: <%= number_to_currency(cart_item.product.price * cart_item.quantity) %></p>
          
          <% total_price += cart_item.product.price * cart_item.quantity %>
        </div>
      <% end %>
    </div>

    <!-- Display Total Price -->
    <div class="mt-4">
      <h2 class="text-3xl font-semibold text-indigo-900">Total Price: <%= number_to_currency(total_price) %></h2>
    </div>
  </div>

  <!-- Stripe Checkout Button -->
  <div data-controller="stripe-checkout" data-stripe-checkout-url-value="<%= stripe_session_cart_path(@current_cart.secret_id) %>">
  </div>
</div>
